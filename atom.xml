<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>学渣的世界你不懂</title>
  
  <subtitle>5minutesTutorial</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://tmp.dxz.plus/"/>
  <updated>2019-12-07T14:54:58.074Z</updated>
  <id>http://tmp.dxz.plus/</id>
  
  <author>
    <name>金牌大学渣</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>docker 实现 v2ray Shadowsocks-libev ( ss )和 emby 全走自选 CDN ( cloudflare ) 节点 记录 算不上 教程 已添加 trojan 特洛伊</title>
    <link href="http://tmp.dxz.plus/2019/11/29/dockerV2raySsEmbyTrojan/"/>
    <id>http://tmp.dxz.plus/2019/11/29/dockerV2raySsEmbyTrojan/</id>
    <published>2019-11-29T12:29:50.000Z</published>
    <updated>2019-12-07T14:54:58.074Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>参考 <a href="https://ssu.tw/index.php/archives/31/" target="_blank" rel="noopener"><strong>使用docker快速部署shadowsocks-libev+v2ray-plugin</strong></a> 和 <a href="https://www.youtube.com/watch?v=8syWEJq8dH4&t=120s" target="_blank" rel="noopener"><strong>V2Ray拒绝减速CDN，自选香港日本CDN节点</strong></a>两位的方法, 结合<a href="https://teddysun.com/569.html" target="_blank" rel="noopener">秋水</a>提供的 <a href="https://hub.docker.com/r/teddysun/shadowsocks-libev/" target="_blank" rel="noopener">ss-libev</a> 和 <a href="https://hub.docker.com/r/teddysun/v2ray" target="_blank" rel="noopener">v2ray</a> 两个 dockers 用起来非常爽，全走CDN，不再阻断，速度尚可。总结一下</p><a id="more"></a><h2 id="废话，可以不看"><a href="#废话，可以不看" class="headerlink" title="废话，可以不看"></a>废话，可以不看</h2><p>垃圾小鸡如何拯救（剁手党如何回本）？雪嫩的小白，如何有工程师的感觉？ 经济不景气如何提振？看这里就对了<br>折腾了两天，基本实现想要的效果。docker 配置 ss+v2ray+emby ws+http+tls+CDN。为了掩饰，我在aws的lightsail开了一个爱尔兰节点的小鸡，512内存，基本匹配市面垃圾小鸡。<br>Docker的有点就是一旦搭建好以后，可以随便折腾，配置文件保存到本地，换机分分钟<br>caddy 的优势是及其轻量，同时可以自动申请并续期证书，方便到家<br>但是现在有一个坑卡住了，就是caddy自动申请脚本，还是要到dns去添加txt记录，而教程里面是要到阿里云的dns去添加txt。所以不能自动。以本白现在的水平，搞不定了，期待高手出现。。。<br>除了这篇手动教程，还有很多选择，比如<a href="https://blog.sprov.xyz/2019/08/03/v2-ui/" target="_blank" rel="noopener"><strong>这篇面板</strong></a>教程，也非常方便。还有<a href="https://github.com/wulabing/V2Ray_ws-tls_bash_onekey" target="_blank" rel="noopener"><strong>这篇</strong></a>，是我之前一直在用的一键脚本。在多数新装的vps上面都可以成功。本教程的目的就是一个：折腾<br>如果你对自己折腾出来的东西感到开心，不怕麻烦，那就继续<br>当然，自己折腾，把思路整理清楚了，基本上什么环境都可以适用，并且配置文件完全自己驾驭，想改什么都可以。不像用脚本，出了问题，出了换系统，换脚本之外，别无他法，相当无助<br>当然，教程还需要完善，也有很多错误，需要慢慢改<br>caddy配置文件里面有3个网站v2，ss，emby<br>按需使用，增减设置文件，开停相应docker即可<br>折腾开心哈<br><strong>注意，教程里面的 邮箱信息 API 信息以及密码 UUID等 需要你自己更改，不要和教程的一毛一样</strong></p><h2 id="视频记录"><a href="#视频记录" class="headerlink" title="视频记录"></a>视频记录</h2><div id="dplayer2" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer2"),"theme":"#FADFA3","video":{"url":"http://share.dxz.plus/BlogContent/My%20Movie-dockerV2raySsCDN.mp4","pic":"http://share.dxz.plus/BlogContent/My%20Movie-dockerV2raySsCDN.png"},"danmaku":{"id":"9E2E3368B56CDBB4","api":"http://dplayer.daoapp.io","token":"tokendemo"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script><p>干什么都有第一次，这个视频够简陋的了，打码就废了好长时间。机器也不行，小白难，穷小白难上加难</p><h2 id="搞定CDN"><a href="#搞定CDN" class="headerlink" title="搞定CDN"></a>搞定CDN</h2><p>lightsail的系统太操蛋，先dd个debian 9<br>用脚本</p><pre><code>apt updateapt install curl screen zip nload nano -yapt-get install -y xz-utils openssl gawk filebash &lt;(wget --no-check-certificate -qO- &apos;https://moeclub.org/attachment/LinuxShell/InstallNET.sh&apos;) -d 9 -v 64 -a -firmware</code></pre><p>等几分钟就可以root登陆了 密码是 MoeClub.org</p><p>直接上CDN，看<a href="https://www.youtube.com/watch?v=8syWEJq8dH4&t=120s" target="_blank" rel="noopener">这个</a>视频，到<a href="https://cdn.moeelf.com/" target="_blank" rel="noopener">这个网站</a>添加域名。主域名，二级域名都行.<br>这里添加3个二级 分别是 sslbv v2ray 和 emby<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-29%20at%2012.28.39%20AM-ARecord.png" alt="ARecord"><br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-29%20at%2012.29.18%20AM-Cname.png" alt="Cname"><br>记下CNAME，然后去dns服务商出添加cname，比如阿里云免费提供的dns解析<br>如下添加3个<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-29%20at%2012.31.57%20AM-DNS-Cname.png" alt="DNS-Cname"><br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-29%20at%2012.34.02%20AM-DNS-Cname1.png" alt="DNS-Cname1"><br><strong>安装一些必备的东西</strong></p><pre><code>apt updateapt install curl screen zip nload nano sshfs -y</code></pre><p>安装embyserver的部分参见<a href="http://dxz.plus/index.php/2019/11/03/10.html" target="_blank" rel="noopener"><strong>之前</strong></a>的帖子，注意建立本地用户就行了，不需要连接账户登陆。因为我不知掉的原因，用emby账户无法走CDN加速。</p><h2 id="安装caddy并申请证书"><a href="#安装caddy并申请证书" class="headerlink" title="安装caddy并申请证书"></a>安装caddy并申请证书</h2><p>证书用caddy申请，参照<a href="https://ssu.tw/index.php/archives/8/" target="_blank" rel="noopener"><strong>这篇</strong></a>帖子，看到搞定cloudflare的 API KEY 即停。后面的申请不用acme.sh脚本。<br>在ssh里面执行 export的环境设置</p><pre><code>export CLOUDFLARE_EMAIL=&quot;youremail@gmail.com&quot;export CLOUDFLARE_API_KEY=&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;</code></pre><p><strong>安装caddy</strong></p><pre><code>curl https://getcaddy.com | bash -s personal tls.dns.cloudflare</code></pre><p><strong>caddy申请证书</strong><br>建目录，放文件</p><pre><code>mkdir /root/caddycd /root/caddynano /root/caddy/Caddyfile</code></pre><p>把下面内容添加到Caddyfile</p><pre><code>sslbv.madelonely.ml {  gzip  tls {      dns cloudflare}  log /root/caddy/caddy.s.log  proxy / https://baidu.com  proxy /dxz 127.0.0.1:9999 {    websocket    header_upstream -Origin  }}v2ray.madelonely.ml {  gzip  tls {      dns cloudflare}  log /root/caddy/caddy.v.log  proxy /dxz 127.0.0.1:8888 {    websocket    header_upstream -Origin  }}emby.madelonely.ml {  gzip  tls {      dns cloudflare}  log /root/caddy/caddy.e.log  proxy / 127.0.0.1:8096 {   header_upstream -Origin  websocket}}</code></pre><p>然后执行</p><pre><code>caddy -conf /root/caddy/Caddyfile</code></pre><p>这时候回提示输入邮箱，随便写，回车之后开始验证dns，不要紧，继续操作。<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-29%20at%201.03.09%20AM-VerifyDNS.png" alt="VerifyDNS"><br>回车后到之前 CF Parterner 网页，刷新一下，找到如下的新记录<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-29%20at%201.03.51%20AM-txt.png" alt="txt"><br>将两行文字复制到dns解析的地方，添加txt记录 完成验证<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-29%20at%201.04.03%20AM-record.png" alt="Record"><br>ssh这边已经验证完毕，并正常运行caddy服务<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-29%20at%201.04.38%20AM-Verified.png" alt="Verified"><br>接着按照视频教程走可以指定CDN节点，最后效果是这样。当然，也可以全部搞定再慢慢调整<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-29%20at%202.00.41%20PM-AssigningCDN.png" alt="AssigningCDN"><br>把申请好的sslbv的证书复制到/root/caddy/ssplugin/</p><pre><code>mkdir /root/caddy/ssplugin/cp /root/.caddy/acme/acme-v02.api.letsencrypt.org/sites/sslbv.madelonely.ml/sslbv.madelonely.ml.crt /root/caddy/ssplugin/plugin.crtcp /root/.caddy/acme/acme-v02.api.letsencrypt.org/sites/sslbv.madelonely.ml/sslbv.madelonely.ml.key /root/caddy/ssplugin/plugin.key</code></pre><p>至此，tls搞定。</p><h2 id="挂载给emby读取00盘"><a href="#挂载给emby读取00盘" class="headerlink" title="挂载给emby读取00盘"></a>挂载给emby读取00盘</h2><pre><code>curl https://rclone.org/install.sh | bashmkdir /root/rclone/mkdir /root/rclone/ldfdsa00</code></pre><p>先执行<code>rclone config</code> 然后q退出</p><pre><code>nano /root/.config/rclone/rclone.conf</code></pre><p>把正常使用的rclone.conf文件内容粘贴到rclone.conf里面，不用重新配置rclone了<br>添加到开机启动</p><pre><code>nano /etc/crontab</code></pre><p>最下面加入</p><pre><code>@reboot root rclone mount ldfdsa00: /root/rclone/ldfdsa00  --buffer-size 1G --vfs-read-chunk-size 256M --vfs-read-chunk-size-limit 2G  --allow-non-empty --allow-other   --dir-cache-time 12h  &gt;/dev/null 2&gt;&amp;1 &amp;</code></pre><p>也可以把证书更新后copy给ss docker用的加到crontab里面，真正实现证书全自动续期，不用再管了(注意一下，如果按照本片教程指定CDN是无法全自动，如果直接cf指定节点，也就是有cf而不是像我由阿里云解析dns，那是可以做到全自动的)</p><pre><code>0 0 0 * * root  cp /root/.caddy/acme/acme-v02.api.letsencrypt.org/sites/sslbv.madelonely.ml/sslbv.madelonely.ml.crt /root/caddy/ssplugin/plugin.crt0 0 0 * * root cp /root/.caddy/acme/acme-v02.api.letsencrypt.org/sites/sslbv.madelonely.ml/sslbv.madelonely.ml.key /root/caddy/ssplugin/plugin.key</code></pre><p>为了避免错误，先增加虚拟内存，2-3g</p><pre><code>wget https://www.moerats.com/usr/shell/swap.sh &amp;&amp; bash swap.sh</code></pre><p>按1再写2000-3000<br><strong>挂载</strong><br>可先把后台参数 <code>&gt;/dev/null 2&gt;&amp;1 &amp;</code> 去掉 加上 <code>-vvv</code> 参数 等没问题在加后台参数 <code>&gt;/dev/null 2&gt;&amp;1 &amp;</code></p><pre><code>rclone mount ldfdsa00: /root/rclone/ldfdsa00  --buffer-size 1G --vfs-read-chunk-size 256M --vfs-read-chunk-size-limit 2G  --allow-non-empty --allow-other   --dir-cache-time 12h  &gt;/dev/null 2&gt;&amp;1 &amp;</code></pre><h2 id="docker镜像"><a href="#docker镜像" class="headerlink" title="docker镜像"></a>docker镜像</h2><p><strong>v2ray</strong><br>在 /root/caddy/v2ray下新建文件config.json</p><pre><code>mkdir /root/caddy/v2raynano /root/caddy/v2ray/config.json</code></pre><p>将如下内容填入config.json文件（相应位置自己改）</p><pre><code>{        &quot;log&quot; : {                &quot;access&quot;: &quot;/var/log/v2ray/access.log&quot;,                &quot;error&quot;: &quot;/var/log/v2ray/error.log&quot;,                &quot;loglevel&quot;: &quot;warning&quot;        },        &quot;inbounds&quot;:[{                &quot;port&quot;: 8888,                &quot;protocol&quot;: &quot;vmess&quot;,                &quot;settings&quot;: {                        &quot;clients&quot;: [                                {                                        &quot;id&quot;: &quot;ae2a6c5e-11d7-11ea-8d71-362b9e155667&quot;,                                         &quot;level&quot;: 1,                                        &quot;alterId&quot;: 88                                }                        ]                },                &quot;streamSettings&quot;: {                        &quot;network&quot;: &quot;ws&quot;,                        &quot;wsSettings&quot;: {                                &quot;path&quot;: &quot;/dxz&quot;                         }                }        }],        &quot;outbounds&quot;: [{                &quot;protocol&quot;: &quot;freedom&quot;,                &quot;settings&quot;: {}        }]}  </code></pre><p>这个配置文件是否可用，自己可以到<strong><a href="https://tools.sprov.xyz/v2ray/" target="_blank" rel="noopener">这个</a></strong>网站自查。<br><strong><a href="https://www.uuidgenerator.net/" target="_blank" rel="noopener">这个网站</a></strong>可以生成自己的uuid<br><strong>ss-lbev</strong><br>创建ss-libev配置文件</p><pre><code>mkdir /root/caddy/sspluginnano /root/caddy/ssplugin/config.json  </code></pre><p>写入如下内容</p><pre><code>{&quot;server&quot;:&quot;127.0.0.1&quot;,&quot;server_port&quot;:9999,&quot;method&quot;:&quot;aes-128-gcm&quot;,&quot;timeout&quot;:300,&quot;password&quot;:&quot;dxz&quot;, &quot;fast_open&quot;:false,&quot;nameserver&quot;:&quot;8.8.8.8&quot;,&quot;mode&quot;:&quot;tcp_and_udp&quot;,&quot;plugin&quot;:&quot;v2ray-plugin&quot;,&quot;plugin_opts&quot;:&quot;server;path=/dxz&quot; }</code></pre><p><strong>emby</strong><br>emby不需要配置文件，一行命令搞定</p><p><strong>安装docker</strong><br>脚本</p><pre><code>curl -fsSL https://get.docker.com -o get-docker.sh    sh get-docker.sh</code></pre><h2 id="pull-docker镜像"><a href="#pull-docker镜像" class="headerlink" title="pull docker镜像"></a>pull docker镜像</h2><pre><code>docker run -d -p 8888:8888 --name v2 --restart=always -v /root/caddy/v2ray:/etc/v2ray teddysun/v2raydocker run -d --name ss --restart always --net host -v /root/caddy/ssplugin:/etc/shadowsocks-libev teddysun/shadowsocks-libevdocker run --name=emby -d -v /root/emby/config:/config   -v /root/rclone:/clone     --net host  -e UID=1000  -e GID=100  -e GIDLIST=100 --restart unless-stopped  emby/embyserver:latest</code></pre><p>再次添加 api</p><pre><code>export CLOUDFLARE_EMAIL=&quot;youremail@gmail.com&quot;export CLOUDFLARE_API_KEY=&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;</code></pre><h2 id="执行caddy，启动3个docker的cdn连接"><a href="#执行caddy，启动3个docker的cdn连接" class="headerlink" title="执行caddy，启动3个docker的cdn连接"></a>执行caddy，启动3个docker的cdn连接</h2><pre><code>caddy -conf /root/caddy/Caddyfile</code></pre><p>这时候可以看提示，有错误就看看哪儿的问题，解决一下。没有问题就下一步</p><h2 id="开机启动脚本"><a href="#开机启动脚本" class="headerlink" title="开机启动脚本"></a>开机启动脚本</h2><p>新建启动文件</p><pre><code>nano /root/caddy/caddystart</code></pre><p>写入下列内容</p><pre><code>#!/bin/bashCLOUDFLARE_EMAIL=&quot;youremail@gmail.com&quot; \CLOUDFLARE_API_KEY=&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxx&quot; \caddy -conf /root/caddy/Caddyfile &gt;/dev/null 2&gt;&amp;1 &amp;</code></pre><p>利用crontab自启动</p><pre><code>nano /etc/crontab</code></pre><p>最下一行写入</p><pre><code>@reboot root bash /root/caddy/caddystart</code></pre><p>这样每次重启就自动运行三个网站，并自动开启CDN。<br>更新证书还是没有解决，因为指定CDN的原因，必须手动复制txt到dns解析服务。<br>但是如果不指定DNS，那么这个脚本就真正做到完全自动化了<br>一点点遗憾</p><h2 id="VOILA"><a href="#VOILA" class="headerlink" title="VOILA"></a>VOILA</h2><h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><ol><li><p>我这里开cf 白天看00盘里的4k电影很轻松，remux 4k 有难度。可能是CDN的IP选的不好，以后慢慢找</p></li><li><p>晚上速度待测，昨天速度只有10Mb/s，比较差，符合垃圾小鸡的水平，但是比直连要快</p></li><li><p>晚上高峰结果，40m码率无压力</p><div id="dplayer3" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer3"),"theme":"#FADFA3","video":{"url":"http://share.dxz.plus/BlogContent/IMG_8362-IE-emby-test-11292230.MOV","pic":"http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-29%20at%2011.17.20%20PM-emby-test-11292230.png"},"danmaku":{"id":"9E2E3368B56CDBB4","api":"http://dplayer.daoapp.io","token":"tokendemo"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script></li><li><p>爱尔兰小鸡直连和CDN对比<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-30%20at%2011.30.13%20PM-Compare.png" alt="compare"></p></li><li><p>如果都搭建好了，发现不走CDN，试试去cloudflare改下SLL/TLS设置<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-30%20at%2010.17.33%20AM-SSL-TLS.png" alt="SSL/TLS"></p></li><li><p>docker的用途还有很多，比如折腾久了，想记录一下，写个记录之类的，比如这个博客就是用docker搞定等。typecho wordpress hexo 都可以，简单几步，5分钟，以后回出教程。</p></li><li><p><strong>添加特洛伊 trojan</strong></p></li></ol><p><strong>申请证书</strong><br>只需在 /root/caddy/Caddyfile 种添加一个记录，就可以申请 证书</p><pre><code>trojan.trumptheidiot.tk {  gzip  tls {      dns cloudflare}  log /root/caddy/caddy.s.log  proxy / https://baidu.com  proxy /dxz 127.0.0.1:9999 {    websocket    header_upstream -Origin  }}</code></pre><p>运行 <code>caddy -conf /root/caddy/Caddyfile</code> 就可以自动开始申请证书，添加TXT记录方法同上</p><p>证书申请完后，记得先删 /root/caddy/Caddyfile 文件刚刚添加的用于申请证书的内容，否则就套了CDN，trojan的效果大打折扣。</p><p><strong>新建目录，写配置</strong></p><pre><code>mkdir /root/trojannano /root/trojan/config.json</code></pre><p>密码dxz，改成你想要的</p><pre><code>{    &quot;run_type&quot;: &quot;server&quot;,    &quot;local_addr&quot;: &quot;0.0.0.0&quot;,    &quot;local_port&quot;: 443,    &quot;remote_addr&quot;: &quot;127.0.0.1&quot;,    &quot;remote_port&quot;: 80,    &quot;password&quot;: [        &quot;dxz&quot;    ],    &quot;log_level&quot;: 1,    &quot;ssl&quot;: {        &quot;cert&quot;: &quot;/config/certificate.crt&quot;,        &quot;key&quot;: &quot;/config/private.key&quot;,        &quot;key_password&quot;: &quot;&quot;,        &quot;cipher&quot;: &quot;ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256&quot;,        &quot;prefer_server_cipher&quot;: true,        &quot;alpn&quot;: [            &quot;http/1.1&quot;        ],        &quot;reuse_session&quot;: true,        &quot;session_ticket&quot;: false,        &quot;session_timeout&quot;: 600,        &quot;plain_http_response&quot;: &quot;&quot;,        &quot;curves&quot;: &quot;&quot;,        &quot;dhparam&quot;: &quot;&quot;    },    &quot;tcp&quot;: {        &quot;prefer_ipv4&quot;: false,        &quot;no_delay&quot;: true,        &quot;keep_alive&quot;: true,        &quot;fast_open&quot;: false,        &quot;fast_open_qlen&quot;: 20    },    &quot;mysql&quot;: {        &quot;enabled&quot;: false,        &quot;server_addr&quot;: &quot;127.0.0.1&quot;,        &quot;server_port&quot;: 3306,        &quot;database&quot;: &quot;trojan&quot;,        &quot;username&quot;: &quot;trojan&quot;,        &quot;password&quot;: &quot;&quot;    }}</code></pre><p>启动trojan docker，端口由于我在原有基础上添加，所以不能用443，改成32400，假装是plex服务器。你可以改成443，更真一些。<br><strong>启动trojan docker</strong></p><pre><code>docker run -dt --name trojan -v /root/trojan:/config -p 32400:443 trojangfw/trojan</code></pre><p><strong>看启动日志，排错</strong></p><pre><code>docker logs -f trojan</code></pre><p><strong>客户端</strong><br>可以安装OpenWRT，一些固件已经自带trojan了<br>win mac 可以参考<a href="https://la4ji.blogspot.com/2019/01/trojandebianxx.html" target="_blank" rel="noopener">这篇文章</a><br>文章写的比较早，ios没提到小火箭，亲测小火箭可用，只需要添加相应（子）域名和密码即可。<br>注意的是，用cloudflare DNS 解析的时候，一定要把 云朵图标熄灭<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-12-06%20at%209.26.49%20AM-trojonCDNoff.png" alt="CDNoff"><br>有疑问或者有能力帮我填坑请（via频道主 <a href="https://t.me/gdriveHost" target="_blank" rel="noopener">https://t.me/gdriveHost</a> ）加群 </p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;参考 &lt;a href=&quot;https://ssu.tw/index.php/archives/31/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;使用docker快速部署shadowsocks-libev+v2ray-plugin&lt;/strong&gt;&lt;/a&gt; 和 &lt;a href=&quot;https://www.youtube.com/watch?v=8syWEJq8dH4&amp;t=120s&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;strong&gt;V2Ray拒绝减速CDN，自选香港日本CDN节点&lt;/strong&gt;&lt;/a&gt;两位的方法, 结合&lt;a href=&quot;https://teddysun.com/569.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;秋水&lt;/a&gt;提供的 &lt;a href=&quot;https://hub.docker.com/r/teddysun/shadowsocks-libev/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ss-libev&lt;/a&gt; 和 &lt;a href=&quot;https://hub.docker.com/r/teddysun/v2ray&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;v2ray&lt;/a&gt; 两个 dockers 用起来非常爽，全走CDN，不再阻断，速度尚可。总结一下&lt;/p&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>甲骨文 免费鸡 重装系统 dd debian 9</title>
    <link href="http://tmp.dxz.plus/2019/11/25/Oracle/"/>
    <id>http://tmp.dxz.plus/2019/11/25/Oracle/</id>
    <published>2019-11-25T12:29:50.000Z</published>
    <updated>2019-12-07T14:57:02.456Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ss最近太难受，而手里的甲骨文免费小鸡，无论如何也安装不上wireguard，系统是 ubuntu 18. 决定dd个debian。但是命令执行不下去，没办法，只好先创建一个收费鸡，系统换到16，然后在dd脚本至debian9</p><a id="more"></a><h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><p>创建新鸡，把老鸡的引导盘挂载到新鸡，把新鸡到引导盘dd到挂载的老鸡上（千万别搞反了，比如我。。。）<br>补充一点（避免“如不自宫也成神功”的尴尬），如果你的免费鸡没有问题，只是Ubuntu版本选错想换版本dd的话，直接创建付费版，直接dd，成功了再照下面dd给免费版。这样比较安全。<br>创建收费鸡</p><hr><p>当然选择最便宜的，也就几个小时，不会花费太多。<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-25%20at%201.25.53%20PM-dd.png" alt="付费鸡"><br>之后来到老鸡的控制面板，先关机，再到最下，BOOT Volume处点击右面的三个点儿，选择detach<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-25%20at%201.34.12%20PM-detach.png" alt="detach"><br>然后到新鸡处在 attched block volumes 选择刚才detach下来的volume，attach以后选择三个点 再点 iscsi command<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-25%20at%201.31.42%20PM-iSCSI.png" alt="iSCSI"><br>之后复制attach的信息，粘贴到SSH里面，就可以挂载了。运行fdisk -l 查看挂载情况，我这里/dev/sdb就是新盘。<br>确定好以后，开始</p><h2 id="dd-Ubuntu-16"><a href="#dd-Ubuntu-16" class="headerlink" title="dd Ubuntu 16"></a>dd Ubuntu 16</h2><p>dd命令</p><pre><code>dd if=/dev/sda of=/dev/sdb</code></pre><p><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-25%20at%203.18.44%20PM-dd-command.png" alt="ddCommand"><br>为了防止断网之类的，用screen命令运行，这样可以随时查看，当然也没啥查看的，命令执行以后，没有任何反应，直到3-4个小时之后才有结果。</p><p>成功以后 还要去刚才复制iscsi信息的地方 复制detach命令，去新鸡用 SSH 登陆 卸载磁盘，然后删掉付费鸡。重启免费鸡，ubuntu16到手<br>下面开始</p><h2 id="dd-Debian9"><a href="#dd-Debian9" class="headerlink" title="dd Debian9"></a>dd Debian9</h2><p>用viser的命令</p><pre><code>apt-get updateapt-get install -y xz-utils openssl gawk filebash &lt;(wget --no-check-certificate -qO- &apos;https://moeclub.org/attachment/LinuxShell/InstallNET.sh&apos;) -d 9 -v 64 -a -firmware</code></pre><p>再经过十来分钟，看到ssh断开，ping断断续续几次，ssh就又连上了。至此，dd完毕，进入debian9.密码是MoeClub.org<br>[dplayer url=”<a href="http://share.dxz.plus/BlogContent/Screen%20Recording%202019-11-25%20at%207.46.40%20PM-Wireguard.mov&quot;" target="_blank" rel="noopener">http://share.dxz.plus/BlogContent/Screen%20Recording%202019-11-25%20at%207.46.40%20PM-Wireguard.mov&quot;</a> pic=”<a href="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-25%20at%207.47.35%20PM-Wireguard.png&quot;/]" target="_blank" rel="noopener">http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-25%20at%207.47.35%20PM-Wireguard.png&quot;/]</a></p><h2 id="终于舒服了"><a href="#终于舒服了" class="headerlink" title="终于舒服了"></a>终于舒服了</h2><p>VOILA</p><h2 id="一个小坑"><a href="#一个小坑" class="headerlink" title="一个小坑"></a>一个小坑</h2><p>秋水大佬的脚本生成的client文件无法在 lede 的路由器上面用，手机电脑是可以的。最后还是用逗比的，手机电脑 lede 通吃。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ss最近太难受，而手里的甲骨文免费小鸡，无论如何也安装不上wireguard，系统是 ubuntu 18. 决定dd个debian。但是命令执行不下去，没办法，只好先创建一个收费鸡，系统换到16，然后在dd脚本至debian9&lt;/p&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Autorclone 教程的一些tips及折腾中遇到的错误的解决办法</title>
    <link href="http://tmp.dxz.plus/2019/11/15/AutorcloneTips/"/>
    <id>http://tmp.dxz.plus/2019/11/15/AutorcloneTips/</id>
    <published>2019-11-15T12:29:50.000Z</published>
    <updated>2019-12-07T14:58:06.228Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>用autorclone对于小白的我来说还是挺挑战的，一些基本操作都不会，遇到问题只能靠google，还好多数问题都能找到答案。整理一些使用中的小技巧，和一下自己使用过程中遇到的一些错误以及解决办法，让更多小白更顺畅的折腾。保持更新 UPDATING…</p><a id="more"></a><h2 id="实时log"><a href="#实时log" class="headerlink" title="实时log"></a>实时log</h2><p>autorclone真正造福GDer了，甩一条命令就算完事儿。没有报错，就盯着可是速度也没有，进度也没有，究竟在搞什么？可以看log文件啊？但是log文件有时候很大，看起来不方便，如果能实时观察autorclone运行情况岂不是更好？这样，<br>先开一个screen</p><pre><code>screen -S live-log</code></pre><p>在autorclone文件夹下面，运行如下命令</p><pre><code>tail -f log_rclone.txt </code></pre><p><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-15%20at%209.41.15%20AM-live-log.png" alt="liveLog"></p><h2 id="拷贝域外共享关闭的GD"><a href="#拷贝域外共享关闭的GD" class="headerlink" title="拷贝域外共享关闭的GD"></a>拷贝域外共享关闭的GD</h2><p>有些学校比较操蛋（安全原因或者被撸疼了），关闭域外共享，sa即使添加以后，autorclone也会出各种问题，不顺畅。<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-13%20at%201.25.28%20PM-ShareOutOfOrg.png" alt="ShareOutOfOrg"><br>可以利用之前创建的group来绕过限制</p><h2 id="错误综述"><a href="#错误综述" class="headerlink" title="错误综述"></a>错误综述</h2><p>基本上autorclone 和folderclone错误主要就是 环境+权限+翻墙。 先看几遍教程，大概了解原理，然后按照 环境+权限+翻墙 的顺序一个个排错吧，这就是折腾的乐趣所在，isn’t it ?!</p><h2 id="错误1"><a href="#错误1" class="headerlink" title="错误1"></a>错误1</h2><p>提示如下：<br><img src="http://share.dxz.plus/BlogContent/photo_2019-11-20_10-26-09---user.jpg" alt="--user"><br>重装所有依赖 原来的命令添加 -m –user 参数<br>例如：<br>python pip -m install –upgrade pip –user</p><h2 id="UPDATING…"><a href="#UPDATING…" class="headerlink" title="UPDATING…"></a>UPDATING…</h2>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;用autorclone对于小白的我来说还是挺挑战的，一些基本操作都不会，遇到问题只能靠google，还好多数问题都能找到答案。整理一些使用中的小技巧，和一下自己使用过程中遇到的一些错误以及解决办法，让更多小白更顺畅的折腾。保持更新 UPDATING…&lt;/p&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>AutoRclone 手动加 SA 到 Group 5分钟 5minuts</title>
    <link href="http://tmp.dxz.plus/2019/11/10/AutorcloneSAGroup/"/>
    <id>http://tmp.dxz.plus/2019/11/10/AutorcloneSAGroup/</id>
    <published>2019-11-10T12:29:50.000Z</published>
    <updated>2019-12-07T14:58:50.593Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>手动添加 SA 到 group 非常简单,就是比较耗时,因为每天只能添加100个 SA 到group 。因为只需要添加一个用户 (admin) 即可操作 autorclone，实现更高效的操作（折腾） gdrive 互拷。</p><a id="more"></a><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>结合这篇堪称完美的教程 <a href="https://567899.xyz/google_drive_folderclone.html，拿到" target="_blank" rel="noopener">https://567899.xyz/google_drive_folderclone.html，拿到</a> SA.json files. 并通过 Chrome 的 Email Extractor 插件提取到邮件地址。<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-08%20at%2011.15.11%20PM-SAs.png" alt="SAList"><br>下一步就是</p><h2 id="创建group"><a href="#创建group" class="headerlink" title="创建group"></a>创建group</h2><p>在这里 <a href="https://groups.google.com/" target="_blank" rel="noopener">https://groups.google.com/</a> 创建 group，<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-08%20at%2011.52.17%20PM-group-creating.png" alt="groupCreating"><br><a href="mailto:jkljkl@googlegroups.com" target="_blank" rel="noopener">jkljkl@googlegroups.com</a>就是管理员，也是最后要加到TD目录的 SA group<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-08%20at%2011.09.26%20PM-add0.png" alt="admin"><br>按图添加, 一步都不要错，否则就得24小时后在添加了，比如我<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-08%20at%2011.08.26%20PM-add2.png" alt="add"><br>添加10个 重复10次/24小时<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-08%20at%2011.22.23%20PM-KeepAdding.png" alt="adding"><br>添加完毕以后把管理员加入共享目录<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-08%20at%2011.27.50%20PM-toDir.png" alt="toDir"><br>确保 SA.json 都在 accounts 目录<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-08%20at%2011.33.27%20PM-accountRthere.png" alt="accountsRThere"></p><h2 id="执行脚本"><a href="#执行脚本" class="headerlink" title="执行脚本"></a>执行脚本</h2><p><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-08%20at%2011.41.18%20PM-command.png" alt="excute"><br>VOILA ！<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-08%20at%2011.39.50%20PM-voila.png" alt="Voila"></p><h2 id="比如"><a href="#比如" class="headerlink" title="比如"></a>比如</h2><p>因为我把<a href="mailto:dxzdxz@googlegroups.com" target="_blank" rel="noopener">dxzdxz@googlegroups.com</a>加入到00共享盘了，并给了读取权限。你只需要把<a href="mailto:dxzdxz@googlegroups.com" target="_blank" rel="noopener">dxzdxz@googlegroups.com</a>加入到你自己的团队盘 给写入权限 就可以用autorclone把里面的东西都复制到你的团队盘了。</p><h2 id="又如"><a href="#又如" class="headerlink" title="又如"></a>又如</h2><p>你自己创建一个group， <a href="mailto:god@googlegroups.com" target="_blank" rel="noopener">god@googlegroups.com</a>，加一个你自己的真人号，这样，你用god这个号申请进入某个团队，比如dajiejie，等批准以后，god这个group里面的真人号直接能看到dajiejie里面的文件夹，得到文件夹ID，用这个ID，你就可以用god这个group里面的几百个SA搬运，实现一个号，搬运一个团队盘。</p><h2 id="补充1：自动移除SA"><a href="#补充1：自动移除SA" class="headerlink" title="补充1：自动移除SA"></a>补充1：自动移除SA</h2><p>如果你是FC创建的SA，官方git里面提供了移除sa脚本，我下载过来了，你直接用 <a href="http://share.dxz.plus/BlogContent/removesa.py" target="_blank" rel="noopener">http://share.dxz.plus/BlogContent/removesa.py</a><br>把文件放到FC的目录里<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-11%20at%2011.11.50%20AM-remove.png" alt="remove"><br>在cmd里执行<br>python removesa.py （你的TD）ID<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-11%20at%2011.08.59%20AM-cmd.png" alt="rmcmd"><br>原来500多SA，基本都移除了，voila<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-11%20at%2011.32.20%20AM-rmvd.png" alt="rmvd"></p><h2 id="补充2-提取autorclone脚本生成的sa地址"><a href="#补充2-提取autorclone脚本生成的sa地址" class="headerlink" title="补充2: 提取autorclone脚本生成的sa地址"></a>补充2: 提取autorclone脚本生成的sa地址</h2><p>非凡大佬随手给了一个脚本<a href="http://share.dxz.plus/BlogContent/getuserByFeiFan.exe" target="_blank" rel="noopener">http://share.dxz.plus/BlogContent/getuserByFeiFan.exe</a> 造福小白。<br>直接把exe文件放到含有.json文件的文件夹，双击，秒生成user.txt<br><img src="http://share.dxz.plus/BlogContent/photo_2019-11-12_15-04-12-FeifanGetSaScript.jpg" alt="FeifanScript"></p><h2 id="补充3"><a href="#补充3" class="headerlink" title="补充3"></a>补充3</h2><p>实际上添加到group的sa是可以由普通15g账号创建的，使用上也和edu创建的没有区别。</p><h2 id="排错"><a href="#排错" class="headerlink" title="排错"></a>排错</h2><p>试图移除下一个目录时，发现如下错误<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-11%20at%2012.09.33%20PM-error.png" alt="error"><br>cmd没上梯子<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-11%20at%201.40.13%20PM-auth.png" alt="auth"><br>controller账号没给manager权限</p><h2 id="DONE"><a href="#DONE" class="headerlink" title="DONE"></a>DONE</h2>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;手动添加 SA 到 group 非常简单,就是比较耗时,因为每天只能添加100个 SA 到group 。因为只需要添加一个用户 (admin) 即可操作 autorclone，实现更高效的操作（折腾） gdrive 互拷。&lt;/p&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>AutoRclone 教程 利用Group添加SA，5分钟搞定 gdrive转存</title>
    <link href="http://tmp.dxz.plus/2019/11/09/AutorcloneSa5minutes/"/>
    <id>http://tmp.dxz.plus/2019/11/09/AutorcloneSa5minutes/</id>
    <published>2019-11-09T12:29:50.000Z</published>
    <updated>2019-12-07T15:00:04.555Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="嘚哔嘚"><a href="#嘚哔嘚" class="headerlink" title="嘚哔嘚"></a>嘚哔嘚</h2><p>为了让小白真正实现5分钟学会用好autorclone转移Gdrive资源，我真是不遗余力。。。<br>经过Autorclone和Panini两位大佬指导，学会了用Group添加SA，虽然是手动的，比较费事，但是弄好以后一劳永逸。我提供的SA账号里面预计会加入900个SA。届时你只需要将这一个GROUP地址（<a href="mailto:dxzdxz@googlegroups.com" target="_blank" rel="noopener">dxzdxz@googlegroups.com</a>）加入（源）目标TD文件夹（管理员身份）即可。</p><a id="more"></a><h2 id="python环境安装"><a href="#python环境安装" class="headerlink" title="python环境安装"></a>python环境安装</h2><p>这是最难的，如果安装好python环境，你就成功一半了。<br>按这个大佬的教程(<a href="https://567899.xyz/google_drive_folderclone.html)走，python成功再回来" target="_blank" rel="noopener">https://567899.xyz/google_drive_folderclone.html)走，python成功再回来</a></p><h2 id="添加group账号"><a href="#添加group账号" class="headerlink" title="添加group账号"></a>添加group账号</h2><p>把 <a href="mailto:dxzdxz@googlegroups.com" target="_blank" rel="noopener">dxzdxz@googlegroups.com</a> 添加到TD盘或者edu盘（单文件15G限制）的目录（即目标目录），权限是管理员，并记下目标目录ID，备用<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-09%20at%209.29.48%20AM-Add-GroupID.png" alt="AddGroup"></p><h2 id="准备相关文件"><a href="#准备相关文件" class="headerlink" title="准备相关文件"></a>准备相关文件</h2><p>下载这个文件<a href="http://share.dxz.plus/BlogContent/AutoRclone-master-demo.zip并解压，放到任意位置，比如C盘根目录" target="_blank" rel="noopener">http://share.dxz.plus/BlogContent/AutoRclone-master-demo.zip并解压，放到任意位置，比如C盘根目录</a>.</p><h2 id="执行脚本"><a href="#执行脚本" class="headerlink" title="执行脚本"></a>执行脚本</h2><p>打开cmd，输入</p><pre><code>cd C:\AutoRclone-master-demo</code></pre><p>然后执行如下命令，源ID和目标ID换成相应你需要的</p><pre><code>python rclone_sa_magic.py -s 源ID -d 目标ID -dp 自定目标文件夹目录下的目录名 -b 1 -e 900 --disable_list_r</code></pre><p><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-09%20at%2010.56.43%20AM-Transfering.png" alt="Transgering"><br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-09%20at%2010.57.26%20AM-CopyDone.png" alt="AllDone"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;嘚哔嘚&quot;&gt;&lt;a href=&quot;#嘚哔嘚&quot; class=&quot;headerlink&quot; title=&quot;嘚哔嘚&quot;&gt;&lt;/a&gt;嘚哔嘚&lt;/h2&gt;&lt;p&gt;为了让小白真正实现5分钟学会用好autorclone转移Gdrive资源，我真是不遗余力。。。&lt;br&gt;经过Autorclone和Panini两位大佬指导，学会了用Group添加SA，虽然是手动的，比较费事，但是弄好以后一劳永逸。我提供的SA账号里面预计会加入900个SA。届时你只需要将这一个GROUP地址（&lt;a href=&quot;mailto:dxzdxz@googlegroups.com&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;dxzdxz@googlegroups.com&lt;/a&gt;）加入（源）目标TD文件夹（管理员身份）即可。&lt;/p&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Host大法，实现Gdrive直连</title>
    <link href="http://tmp.dxz.plus/2019/11/08/Host/"/>
    <id>http://tmp.dxz.plus/2019/11/08/Host/</id>
    <published>2019-11-08T12:29:50.000Z</published>
    <updated>2019-12-07T15:00:38.937Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>结合Gdrive edu版 实现 无限流量 无限速 直连</p><a id="more"></a><h2 id="why？"><a href="#why？" class="headerlink" title="why？"></a>why？</h2><p>因为有30几T的电影在Gdrive里，很多都是蓝光4k REMUX格式，为了省下硬盘的钱，不得不掏钱买好的代理，阿里云200M确实不错，合租70块一年，不过后来bug停了以后，就只好寻找别的办法，adman，justhost都试过，晚10点左右REMUX还是比较难受的。好在发现koolshare论坛上面有这篇文章，<a href="https://koolshare.cn/thread-164395-1-1.html，我自己搞了一下，发现联通用host解决免流量看Gdrive网盘电影问题，简直不能太爽；经过群友测试，电信大部分地区速度可以，移动就少部分地区可用了。不仅省下了代理的钱，速度更快了。" target="_blank" rel="noopener">https://koolshare.cn/thread-164395-1-1.html，我自己搞了一下，发现联通用host解决免流量看Gdrive网盘电影问题，简直不能太爽；经过群友测试，电信大部分地区速度可以，移动就少部分地区可用了。不仅省下了代理的钱，速度更快了。</a><br>晚十点左右看4k remux的流量情况<br><img src="http://share.dxz.plus/BlogContent/Screen-Shot-2019-10-05-at-11.53.28-AM-1024x497-speed.png" alt="晚十点左右看4k remux的流量情况"><br>这是和上图对应的87m码率的4k蓝光REMUX的播放情况 用的plex转码 手机本地播放<br><img src="http://share.dxz.plus/BlogContent/Screen-Shot-2019-10-05-at-11.55.17-AM-87M-test.png" alt="这是gdrive上面87m码率的4k播放情况 用的plex转码 手机本地播放"></p><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>首先得有可以改host的路由器，梅林，老毛子固件的任何路由器，软路由。个人认为硬路由里面性价比最高的就是新路由3，70块钱咸鱼可得。软路由的话我的配置是J3455底层ESXI，虚拟了OpenWRT，win8 x64，debian10和黑裙。OpenWRT做旁路由，需要走host的机器（虚拟机）网关/nameserver填写旁路由的IP即可。</p><h2 id="可用IP"><a href="#可用IP" class="headerlink" title="可用IP"></a>可用IP</h2><p>Luckily，这些IP没有失效过，只是不同地区/运营商速度有差异<br>172.217.160.6/7/8/9 … 所有能ping通的都可以用，目前效果最好的<br>216.58.204.202<br>172.217.14.202</p><h2 id="5分钟教程开始"><a href="#5分钟教程开始" class="headerlink" title="5分钟教程开始"></a>5分钟教程开始</h2><p>非常简单，看图设置</p><p>LEDE在这里设置<br><img src="http://share.dxz.plus/BlogContent/photo_2019-10-05_14-40-00-1024x685-lede.jpg" alt="LEDE设置"><br>老毛子固件路由器<br><img src="http://share.dxz.plus/BlogContent/Screen-Shot-2019-10-05-at-2.42.47-PM-1024x673-pdn.png" alt="老毛子固件路由器"><br>OpenWRT<br><img src="http://share.dxz.plus/BlogContent/Screen-Shot-2019-10-05-at-2.48.38-PM-1024x904-OWRT.png" alt="OpenWRT"><br>这个略微麻烦，但是确是操作最方便，效果也最好的<br>首先ssh进入路由器<br>在/etc/目录下创建几个host文件<br>vi /etc/host5<br>vi /etc/host6<br>vi /etc/host888<br>…<br>host 文件内容是</p><pre><code>172.217.160.6  www.googleapis.com</code></pre><p>新建host文件<br><img src="http://share.dxz.plus/BlogContent/Screen-Shot-2019-10-05-at-2.45.12-PM-Owrt.png" alt="新建host文件"></p><p>这样做的好处是在上图界面里可以直接指定相关host文件，如果遇到host连不上，可以自动切换，不会在不知情的情况下走了梯子。<br>其他路由器由于本人没有，所以也就不测试了。原理是一样的，依葫芦画瓢就行了。</p><h2 id="测速"><a href="#测速" class="headerlink" title="测速"></a>测速</h2><p>我这里是采用比较麻烦的方法，但是测ip肯定是准的，不会出现走梯子的情况<br>把这个<a href="http://share.dxz.plus/BlogContent/host.test文件里面的所有ip换成你要测速的ip，然后将文件扔到OpenWRT的/etc/目录下" target="_blank" rel="noopener">http://share.dxz.plus/BlogContent/host.test文件里面的所有ip换成你要测速的ip，然后将文件扔到OpenWRT的/etc/目录下</a><br>按照上上图改路由器host的设置，添加一个 /etc/host.test的文件地址即可<br>测速命令用我的盘里2G大小的一个视频。需要在linux下执行，网关设为host路由器IP</p><pre><code>wget --load-cookies /tmp/cookies.txt &quot;https://docs.google.com/uc?export=download&amp;confirm=$(wget --quiet --save-cookies /tmp/cookies.txt --keep-session-cookies --no-check-certificate &apos;https://docs.google.com/uc?export=download&amp;id=1Ygr_r4vUlT1WlCZMKgVOcj_-IW86DbtN&apos; -O- | sed -rn &apos;s/.*confirm=([0-9A-Za-z_]+).*/\1\n/p&apos;)&amp;id=1Ygr_r4vUlT1WlCZMKgVOcj_-IW86DbtN&quot; -O test &amp;&amp; rm -rf /tmp/cookies.txt</code></pre><p>晚上10点的效果，北京联通<br><a href="https://t.me/KickGFWsAsswithHosts/333" target="_blank" rel="noopener">https://t.me/KickGFWsAsswithHosts/333</a></p><h2 id="DONE"><a href="#DONE" class="headerlink" title="DONE"></a>DONE</h2><p>当然，方法有了，没有东西看怎么行？内容为王啊</p><h2 id="福利"><a href="#福利" class="headerlink" title="福利"></a>福利</h2><p>我的电影库永久免费开放，私我你邮箱即可加入，我和群里的小朋友一起维护，一起备份，一直更新<br><img src="http://dxz.plus/usr/uploads/2019/11/4104828687.png" alt="团队盘"><br>里面的文件 如果有1080p和4k的都在4k目录下了，4k有两种 一种REMUX蓝光原盘，体积大，一种原盘rip体积小，有的话我也会放到一起。直接用emby/plex扫就行，一般都有字幕。也可以用nplayer或者其他播放器挂你的gmail，就能打开共享盘00了<br>大不了加频道，进群<br><a href="https://t.me/gdriveHost" target="_blank" rel="noopener">https://t.me/gdriveHost</a> （为避免被各种骚扰，改私密群了，这样比较安全，加频道主进群即可。稍微麻烦点儿，抱歉了）<br>从群主到管理全是小白，给你足够自信，让你畅所欲言</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;结合Gdrive edu版 实现 无限流量 无限速 直连&lt;/p&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>5分钟-15G普通Gdrive账号变身无限制用不翻车账号</title>
    <link href="http://tmp.dxz.plus/2019/11/06/Gdrive15G/"/>
    <id>http://tmp.dxz.plus/2019/11/06/Gdrive15G/</id>
    <published>2019-11-06T12:29:50.000Z</published>
    <updated>2019-12-07T15:01:31.194Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>最近gdrive有很多骚操作，玩了一段时间，做个记录吧。</p><a id="more"></a><h1 id="关于"><a href="#关于" class="headerlink" title="关于"></a>关于</h1><h2 id="无限空间"><a href="#无限空间" class="headerlink" title="无限空间"></a>无限空间</h2><p>gdrive普通账号提供15G免费空间，普通edu账号提供无限空间，附带团队盘的账号团队盘提供无限空间，但是所有者是域管理员，并且但文件夹受限40万文件数量</p><h2 id="关于转存"><a href="#关于转存" class="headerlink" title="关于转存"></a>关于转存</h2><p>由于谷歌限制单账号上传下载总容量750G天，备份几百T级别的存储内容异常痛苦。github大佬研究用sa（service account）的方法转存： <a href="https://github.com/Spazzlo/folderclone，但是这个方法（FC/MC）虽然速度飞快，却有个问题，大量文件夹会丢失很严重，并且重新运行一遍的化会全盘重来，而不是续传。" target="_blank" rel="noopener">https://github.com/Spazzlo/folderclone，但是这个方法（FC/MC）虽然速度飞快，却有个问题，大量文件夹会丢失很严重，并且重新运行一遍的化会全盘重来，而不是续传。</a><br>在此基础上，又有大佬利用sa账号接力的方法使用rclone： <a href="https://github.com/xyou365/AutoRclone，" target="_blank" rel="noopener">https://github.com/xyou365/AutoRclone，</a> 这个方法（AR）是目前在用的最好的解决方案了，兼顾速度和断点续传。毕竟就是rclone嘛，区别就是所有文件的所有者是sa。</p><h2 id="关于sa所有者及15G普通账号变不翻车无限账号"><a href="#关于sa所有者及15G普通账号变不翻车无限账号" class="headerlink" title="关于sa所有者及15G普通账号变不翻车无限账号"></a>关于sa所有者及15G普通账号变不翻车无限账号</h2><p>嗯。。。sort of。。。<br>sa固然方便，但也不是没有限制（虽然可破，后文），所有的账号（15g普通/普通edu/团队）sa作为所有者，单文件15G受限，只有域管理员可以改，但目前没发现哪家改过，gsuite大佬可以一试。如果普通15g账号创建sa，单文件5T限制，总容量普通gmail账号无限制（有传说1PB，未证实）。也就是说普通15G账号经过团队盘中转，已经可以实现无限空间+单文件5T了。这时候你只需要随意加一个下面提到的团队盘就可以实现中转了，而不像以前，必须用edu创建的机器人才能中转单文件15G-5T大小的文档。但是15G账号基本不会翻车，除非作死或者谷歌该policy把你普通15G账号封了。于是普通15G账号雄起成不翻车的无限容量gdrive（sort of。。。 因为只能中转一次）。那么后面又有什么操作呢？可以再注册一个15G账号嘛，把之前转存的账号作为共享文件夹共享给新建的15G账号，这个15G账号就实现了无限容量，单文件5T限制了。唯一的缺点就是，每次更改文件仓库需要重新操作一次团队盘中转。</p><h2 id="突破15G单文件限制"><a href="#突破15G单文件限制" class="headerlink" title="突破15G单文件限制"></a>突破15G单文件限制</h2><p>edu账号创建sa虽然作为owner有15g限制，但是edu的SA本身作为onwer，也有单文件15G限制，而edu本体和15G账号本体作为owner却只有单文件5T限制。那么，突破方法就是——团队盘中转。用AR把别人分享的目录拉到团队盘，这时文件所有者是域，无限制（可能单文件5T限制），这时分两种情况拉出。1，拉到edu任何账号，所有者变成edu，占用edu空间（单文件5T，空间无限，并可继续添加或编辑文件，真无限）；2，拉到15G账号，所有者变该账号（无单文件15g限制）。如果一次拉取超过15G，该账号就不能再添加文件，也可能无法收取邮件（假无限）。但是可以作为如上所述一次性仓库备份整理好的文件。</p><p>不过实际上呢，<strong>基本上大于15G的文件都是蓝光原盘 remux之类的，平时不需要动。而资料文件，鲜有超过15G的。那么在用arclone的时候，就可以直接往15G普通账号内的共享目录添加SA，由于这个SA是15G合法账号创建，又是基本不可能翻车的</strong>。好了，啰嗦完毕，下面</p><h2 id="最新福利"><a href="#最新福利" class="headerlink" title="最新福利"></a>最新福利</h2><p>有大佬分享团队盘，那么就可以按照步骤，享受团队盘的好处了。你只需要一个普通edu甚至15G账号就可以玩儿的很6了<br>Github (<a href="https://github.com/yyuueexxiinngg/some-scripts/blob/master/workers/google/drive/create-share-teamdrive.js" target="_blank" rel="noopener">https://github.com/yyuueexxiinngg/some-scripts/blob/master/workers/google/drive/create-share-teamdrive.js</a>) | Demo (<a href="https://teamdrive.xcpx.workers.dev/" target="_blank" rel="noopener">https://teamdrive.xcpx.workers.dev/</a>)</p><p><a href="https://gd.zxd.workers.dev/" target="_blank" rel="noopener">https://gd.zxd.workers.dev/</a><br><a href="https://www.qq888.workers.dev/" target="_blank" rel="noopener">https://www.qq888.workers.dev/</a><br><a href="https://td.ur.workers.dev/" target="_blank" rel="noopener">https://td.ur.workers.dev/</a><br><a href="https://apply.mcoy.ga/" target="_blank" rel="noopener">https://apply.mcoy.ga/</a></p><p>有了以上的工具和思路，就可以开工了</p><h1 id="简单教程"><a href="#简单教程" class="headerlink" title="简单教程"></a>简单教程</h1><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><p>我看了一下，<a href="https://567899.xyz/google_drive_folderclone.html" target="_blank" rel="noopener">https://567899.xyz/google_drive_folderclone.html</a> 这里写的非常完美了，小白照做创建SA没有什么难度。如果暂时还没搞定，可以直接用我的机器人。但至少要先把python环境搞定，windows的话，把rlcone WIN版下载下来，rclone目录里面的文件放到FC/AR文件夹即可。然后把我的机器人拿过来直接用。<a href="http://share.dxz.plus/apps/other/900SA.zip" target="_blank" rel="noopener">http://share.dxz.plus/apps/other/900SA.zip</a><br>FC脚本目录到这里下<a href="https://github.com/Spazzlo/folderclone点击绿色按钮，下载zip文件。再把win版rclone文件放到zip解压后的文件即可使用，因为sa都是通用的。" target="_blank" rel="noopener">https://github.com/Spazzlo/folderclone点击绿色按钮，下载zip文件。再把win版rclone文件放到zip解压后的文件即可使用，因为sa都是通用的。</a><br>用AR的话，可以到这里<a href="https://github.com/xyou365/AutoRclone，" target="_blank" rel="noopener">https://github.com/xyou365/AutoRclone，</a><br>在win下，打开cmd，cd到FC或者AR的目录下，把900SA或者你创建的sa文件（xxxx.json）放到AR或者FC的accounts目录下。<br>900SA位置<br><img src="http://share.dxz.plus/BlogContent/Screen-Shot-2019-10-10-at-8.23.09-PM-900sa-location.png" alt="900SA位置"><br>先复制300个SA到acclounts目录里<br><img src="http://share.dxz.plus/BlogContent/Screen-Shot-2019-10-10-at-8.26.46-PM-300sa.png" alt="先复制300个SA到acclounts目录里"></p><h2 id="目标目录准备"><a href="#目标目录准备" class="headerlink" title="目标目录准备"></a>目标目录准备</h2><p>打开900SA文件夹里面任意一个 .html文件，把所有SA地址都添加到GD的目标文件夹，作为管理者<br>复制1-299个SA地址<br><img src="http://share.dxz.plus/BlogContent/Screen-Shot-2019-10-10-at-10.00.07-PM-1024x1018-email.png" alt="复制1-299个SA地址"><br>添加SA到目标目录<br><img src="http://share.dxz.plus/BlogContent/Screen-Shot-2019-10-10-at-8.41.43-PM-1024x701-direcory-setup.png" alt="添加SA到目标目录"><br>注意都是可写权限<br><img src="http://share.dxz.plus/BlogContent/Screen-Shot-2019-10-10-at-8.45.15-PM-1024x716-don.png" alt="注意都是可写权限"></p><h2 id="获取目标ID"><a href="#获取目标ID" class="headerlink" title="获取目标ID"></a>获取目标ID</h2><p>复制刚才添加SA文件夹folders/后面部分，即是目标目录ID，源ID同理<br><img src="http://share.dxz.plus/BlogContent/Screen-Shot-2019-10-10-at-8.51.44-PM-1024x825-get-ID.png" alt="复制刚才添加SA文件夹folders/后面部分，即是目标目录ID，源ID同理"></p><h2 id="执行脚本"><a href="#执行脚本" class="headerlink" title="执行脚本"></a>执行脚本</h2><p>完成准备工作后，cmd进入上述目录，命令如下：<br>FC</p><pre><code>python multifolderclone.py -s 源ID（文件夹需要开凭链接可见的共享） -d 目标文件夹ID（需要添加SA写入权限共享）</code></pre><p>AC</p><pre><code>python rclone_sa_magic.py -s 源ID（文件夹需要开凭链接可见的共享） -d 目标文件夹ID（需要添加SA写入权限共享） -dp 目标文件夹的新建目录名 -b 1（起始SA，可以略过一些超限的SA） -e 600（终止SA） --disable_list_r</code></pre><h2 id="完工"><a href="#完工" class="headerlink" title="完工"></a>完工</h2><p><img src="http://share.dxz.plus/BlogContent/Screen-Shot-2019-10-10-at-8.56.15-PM-finish.png" alt="完工"></p><p>15G邮箱作为存储仓库，owner是15G账号，无15G限制，可以无限容量，但不能编辑/添加<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-07%20at%209.34.44%20AM-storage.png" alt="15G邮箱作为存储仓库，owner是15G账号，无15G限制，可以无限容量，但不能编辑/添加"></p><p>但是可以用其他15G账号当管理员的办法管理该共享空间，并且rclone和nplayer等一干播放器都可以读取share with me的文件夹。</p><p>电影仓库呢，可以用我们的团队盘，里面的内容适合emby和plex搜刮，文件夹内含已经整理好的4k或者1080P的remux/rip文件及相关中英文字幕。你可以根据不同网速选择播放。该盘由小白群成员共同维护，一直更新，保持备份，永久免费。</p><h1 id="排错"><a href="#排错" class="headerlink" title="排错"></a>排错</h1><h2 id="确定python正确安装"><a href="#确定python正确安装" class="headerlink" title="确定python正确安装"></a>确定python正确安装</h2><p>cmd里面运行</p><pre><code>python -V</code></pre><p>有版本号即为成功<br>如果还不成功，执行下面命令重新安装依赖</p><pre><code>python -m pip install --upgrade pippip install oauth2clientpip install google-api-python-clientpip install progresspip install progressbar2pip install  httplib2shim</code></pre><p>有问题加群，全是小白，很欢乐<br>改私密群了，找频道主可<br>频道<br><a href="https://t.me/gdriveHost" target="_blank" rel="noopener">https://t.me/gdriveHost</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近gdrive有很多骚操作，玩了一段时间，做个记录吧。&lt;/p&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>rclone 一条命令备份docker搭建的typecho wordpress数据</title>
    <link href="http://tmp.dxz.plus/2019/11/05/BackupTypecho/"/>
    <id>http://tmp.dxz.plus/2019/11/05/BackupTypecho/</id>
    <published>2019-11-05T12:29:50.000Z</published>
    <updated>2019-12-07T15:02:14.497Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="废话"><a href="#废话" class="headerlink" title="废话"></a>废话</h2><p>typecho没有wordpress那么多插件，自动上传数据库啥的，但是wordpress想备份到gdrive，都要加钱买专业版。但在docker这，你不用花钱。<br>下面只示例typecho，wordpress同理。</p><a id="more"></a><h2 id="update"><a href="#update" class="headerlink" title="update:"></a>update:</h2><p>发现在backup文件夹下面会丢失文件<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-13%20at%2012.01.22%20PM-error.png" alt="error"><br>那就不用current了，直接用bakcup带日期，在crontab里面写入</p><pre><code>0 0 * * * root rclone copy /root/xxx.com/ gd:Apps/wordpressBKP/xxx.com/backup/`date -I`</code></pre><p>这回好了<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-13%20at%2012.10.22%20PM-better.png" alt="better"></p><h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><p>利用crotab</p><p>运行：</p><pre><code>nano /etc/crontab</code></pre><p>最末一行添加以下内容：</p><pre><code>0 0 * * * root rclone sync /root/app gd:Apps/typecho/oj8k.ml/current --backup-dir gd:Apps/typecho/oj8k.ml/backup/$(date &apos;+%Y-%m-%d-%H%M%S&apos;)</code></pre><h2 id="说明："><a href="#说明：" class="headerlink" title="说明："></a>说明：</h2><p>0 0 * * * root rclone sync /root/app gd(你的rclone gdriveID):Apps/typecho/oj8k.ml/current（你的gdrive的备份文件夹） –backup-dir gd(你的rclone gdriveID):Apps/typecho/oj8k.ml/backup/$(date ‘+%Y-%m-%d-%H%M%S’)（按日期备份）</p><p>在添加crontab之前可以试试模拟运行一下看看是否报错，注意改你自己的目录和ID</p><pre><code>rclone sync /root/app dl:Apps/typecho/oj8k.ml/current --backup-dir dl:Apps/typecho/oj8k.ml/backup/$(date &apos;+%Y-%m-%d-%H%M%S&apos;) -vvv -P --dry-run</code></pre><h2 id="成果："><a href="#成果：" class="headerlink" title="成果： "></a>成果： </h2><p><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-05%20at%203.16.31-rclone-crontabBKP%20PM.png" alt="自动创建备份目录"><br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-05%20at%203.17.02%20PM-By-Date.png" alt="按日期备份"></p><h2 id="吹吹优点："><a href="#吹吹优点：" class="headerlink" title="吹吹优点："></a>吹吹优点：</h2><p>1，gdrive无限空间，备份频率你随意，这里是每天备份；<br>2，免费，完整备份；<br>3，结合docker，恢复起来容易；<br>4，独立crontab任务，不用其他任何琐碎应用；<br>5，容我想想。。。<br>6，。。。</p><p>不懂加群（找频道主） <a href="https://t.me/gdriveHost" target="_blank" rel="noopener">https://t.me/gdriveHost</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;废话&quot;&gt;&lt;a href=&quot;#废话&quot; class=&quot;headerlink&quot; title=&quot;废话&quot;&gt;&lt;/a&gt;废话&lt;/h2&gt;&lt;p&gt;typecho没有wordpress那么多插件，自动上传数据库啥的，但是wordpress想备份到gdrive，都要加钱买专业版。但在docker这，你不用花钱。&lt;br&gt;下面只示例typecho，wordpress同理。&lt;/p&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Test-图片外链是否可以用workers的</title>
    <link href="http://tmp.dxz.plus/2019/11/04/TestUrl/"/>
    <id>http://tmp.dxz.plus/2019/11/04/TestUrl/</id>
    <published>2019-11-04T12:29:50.000Z</published>
    <updated>2019-12-07T15:02:57.999Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>试试看看图片外链是否可以用workers的 那样就省本地空间了</p><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><a id="more"></a><p>workers图片<br>地址</p><pre><code>http://share.dxz.plus/BlogContent/Synology%208%20Bay%20NAS%20Diskstation%20(Diskless)%20(DS1819+).jpg</code></pre><p><img src="http://share.dxz.plus/BlogContent/Synology%208%20Bay%20NAS%20Diskstation%20(Diskless)%20(DS1819+).jpg" alt="DS1819+"></p><pre><code>http://share.dxz.plus/BlogContent/my-cloud-ex4100-Hero.png.thumb.1280.1280.png</code></pre><p><img src="http://share.dxz.plus/BlogContent/my-cloud-ex4100-Hero.png.thumb.1280.1280.png" alt="ex4100"></p><h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>可以✅</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;试试看看图片外链是否可以用workers的 那样就省本地空间了&lt;/p&gt;
&lt;h2 id=&quot;测试&quot;&gt;&lt;a href=&quot;#测试&quot; class=&quot;headerlink&quot; title=&quot;测试&quot;&gt;&lt;/a&gt;测试&lt;/h2&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>VPS 5分钟极速搭建emby服务</title>
    <link href="http://tmp.dxz.plus/2019/11/03/Emby/"/>
    <id>http://tmp.dxz.plus/2019/11/03/Emby/</id>
    <published>2019-11-03T12:29:50.000Z</published>
    <updated>2019-12-07T15:06:25.744Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>免费的虽然是最贵的，但是性价比却无可争议的+∞</p><h2 id="废话一堆"><a href="#废话一堆" class="headerlink" title="废话一堆"></a>废话一堆</h2><p>写这个教程是主要是为了测试docker搭建typecho，由于docker映射文件夹简直太方便了，所有网站数据分分钟打包，备份，搬家。适合我这样的瞎折腾。<br>更主要的，我们手里有n多垃圾小鸡，除了探针，网盘目录外还有别的骚法么？<br>这篇文章带你骚。<br>基本上你的小鸡速度够快，尤其是晚上，比如北方联通用justhost，甲骨文之类的都可以非常爽快的试用这个方法。<br>由于是本地kodi解码，串流播放，服务器没啥压力，配置不需要多高，同时也没必要买emby专业版了，我的plex算是白买了，nas我还特意买的J3455服务端解码，看来也是浪费。<br>虽然读取的是gdrive电影，但是由于是vps搭建，host大法基本用不到了。并且这个emby个人服务应该不会触及红线，系统占用低，不用担心被各种ban(GFW&amp;VPS providers)<br>5分钟也就是个标题，看看就好，熟练了也就10分钟以内就搞定。我一连气儿搭了3个服务，太爽了，不分享出来是不行的，憋着难受</p><a id="more"></a><h2 id="安装必要命令"><a href="#安装必要命令" class="headerlink" title="安装必要命令"></a>安装必要命令</h2><pre><code>apt-get updateapt-get install curl zip nano vim -y</code></pre><h2 id="搭建docker，Rclone"><a href="#搭建docker，Rclone" class="headerlink" title="搭建docker，Rclone"></a>搭建docker，Rclone</h2><p>还是一键脚本</p><p><strong>Docker</strong></p><pre><code>curl -fsSL https://get.docker.com -o get-docker.sh    sh get-docker.sh</code></pre><p>发现为了兼顾锐速，选择debian8的情况下，上述脚本无法安装docker，那么手动安装如下：<br>添加源</p><pre><code>nano /etc/apt/sources.list</code></pre><p>把下面几行填入</p><pre><code>deb http://http.debian.net/debian jessie-backports maindeb http://packages.dotdeb.org jessie alldeb-src http://packages.dotdeb.org jessie all</code></pre><p>更新源卸载老版本并安装稳定版docke-ce</p><pre><code>apt-get updateapt-get remove docker docker.io  docker-engine containerd runcapt-get install \     apt-transport-https \     ca-certificates \     curl \     gnupg2 \     software-properties-commoncurl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -add-apt-repository \   &quot;deb [arch=amd64] https://download.docker.com/linux/debian \   $(lsb_release -cs) \   stable&quot;apt-get updateapt-get install docker-ce</code></pre><p><strong>Rclone</strong></p><p>脚本，这个一般不会出错</p><pre><code>curl https://rclone.org/install.sh | bash</code></pre><p>如何vps挂载rclone 参看这个教程，我就不废话了</p><pre><code>https://wzfou.com/rclone-cos-fuse-ossfs/</code></pre><h2 id="建立必要目录"><a href="#建立必要目录" class="headerlink" title="建立必要目录"></a>建立必要目录</h2><p>主要用到 root 目录下的 /root/emby/config 和 /root/rclone/ldfdsa00</p><pre><code>cd /rootmkdir embymkdir emby/configmkdir rclonemkdir rclone/ldfdsa00</code></pre><p>ldfdsa00是我的rclone挂载的目录</p><h2 id="挂载rclone"><a href="#挂载rclone" class="headerlink" title="挂载rclone"></a>挂载rclone</h2><p>我挂载的是自己的团队盘，你要将ldfdsa00替换成你自己的gdrive</p><pre><code>rclone mount ldfdsa00: /root/rclone/ldfdsa00  --buffer-size 1G --vfs-read-chunk-size 256M --vfs-read-chunk-size-limit 2G  --allow-non-empty --allow-other   --dir-cache-time 12h  &gt;/dev/null 2&gt;&amp;1 &amp;</code></pre><p>在contab添加开机自动挂载</p><pre><code>nano /etc/crontab</code></pre><p>添加一行</p><pre><code>@reboot root  rclone mount ldfdsa00: /root/rclone/ldfdsa00  --buffer-size 1G --vfs-read-chunk-size 256M --vfs-read-chunk-size-limit 2G  --allow-non-empty --allow-other   --dir-cache-time 12h  &gt;/dev/null 2&gt;&amp;1 &amp;</code></pre><p><img src="http://dxz.plus/usr/uploads/2019/11/2090253874.png" alt="Screen Shot 2019-11-03 at 3.54.29 PM crontab.png"><br>然后ctrl+x 按y 回车</p><h2 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h2><pre><code>docker run --name=emby -d -v /root/emby/config:/config     -v /root/rclone:/clone     -p 8096:8096  -p 8920:8920  -e UID=1000  -e GID=100  -e GIDLIST=100 --restart unless-stopped  emby/embyserver:latest</code></pre><h2 id="增加虚拟内存"><a href="#增加虚拟内存" class="headerlink" title="增加虚拟内存"></a>增加虚拟内存</h2><p>依旧是脚本</p><pre><code>wget https://www.moerats.com/usr/shell/swap.sh &amp;&amp; bash swap.sh</code></pre><p>选1再填2000，因为我用的小鸡只有512m内存，不加虚拟内存的话，rclone挂载很容易掉线</p><h2 id="配置emby"><a href="#配置emby" class="headerlink" title="配置emby"></a>配置emby</h2><p>浏览器输入IP:8096即可打开emby server<br>然后就是设置，记得新建用户的时候同时新建一个emby免费账号，并填入，后面客户端方便登陆。<br>需要注意的一点就是电影的目录选择你自己上面挂载好并映射到emby docker的目录 /clone/ldfdsa00<br><img src="http://dxz.plus/usr/uploads/2019/11/1437937058.png" alt="Screen Shot 2019-11-03 at 4.02.22 PM emby目录.png"></p><h2 id="emby串流"><a href="#emby串流" class="headerlink" title="emby串流"></a>emby串流</h2><p>添加好电影目录并搜刮好以后就可以用kodi emby插件进行串流播放<br>先安装emby插件<br><img src="http://dxz.plus/usr/uploads/2019/11/2473017914.jpg" alt="photo_2019-11-03_16-15-25.jpg"><br>登陆并选择之前建立的emby账号下的电影库，我在oracle小鸡搭建的，速度稳定40m，一般的电影都可以，少数4k rip电影也可以看<br><img src="http://dxz.plus/usr/uploads/2019/11/939861859.jpg" alt="photo_2019-11-03_16-15-03.jpg"></p><h2 id="done"><a href="#done" class="headerlink" title="done"></a>done</h2><h2 id="常见出错"><a href="#常见出错" class="headerlink" title="常见出错"></a>常见出错</h2><p><strong>提示FUSE error</strong></p><pre><code>error: failed to mount FUSE fs: fusermount: exec: &quot;fusermount&quot;: executable file not found in $PATH</code></pre><p>安装 sshfs</p><pre><code>apt install sshfs -y</code></pre><p><strong>Kodi emby 插件</strong></p><p>官方的embycon好像不灵，用这个备用源的</p><pre><code>http://kodi.emby.media/</code></pre><p>如果rclone掉了 reboot就行<br>如果rclone账号api超限，需要换一个账号，挂载相同路径的（团队）盘目录<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-06%20at%208.58.46%20AM-remount.png" alt="remount"></p><p><strong>还是推荐embycon插件，这个虽然不能添加多服务器，但是稳定性好很多，资源占用少</strong></p><p><strong>重新挂载gd</strong></p><pre><code>umount /root/rclone/ldfdsa00 #卸载源目录rclone mount gd（换成新账号，内部目录要匹配）: /root/rclone/ldfdsa00  --buffer-size 1G --vfs-read-chunk-size 256M --vfs-read-chunk-size-limit 2G  --allow-non-empty --allow-other   --dir-cache-time 12h  &gt;/dev/null 2&gt;&amp;1 &amp;      #重新挂载docker restart emby #重启emby server</code></pre><p><strong>挂载目录</strong></p><p>挂载gd 容器内gd 有点乱， 来张图说明一下<br><img src="http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-04%20at%205.14.59%20PM-diskRelations.png" alt="目录关系"></p><h2 id="挂载00电影盘"><a href="#挂载00电影盘" class="headerlink" title="挂载00电影盘"></a>挂载00电影盘</h2><p>emby如下设置，可以扫00盘的电影和美剧，缩略图都扫好了，你只需设置自己喜欢的字幕即可</p><p><img src="http://share.dxz.plus/BlogContent/photo_2019-11-20_09-12-38-embySetup.jpg" alt="embySetup"></p><h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><p>搭建在甲骨文免费vps上的emby server，完美运行</p><div id="dplayer0" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer0"),"theme":"#FADFA3","video":{"url":"http://share.dxz.plus/BlogContent/Screen%20Recording%202019-11-19%20at%2010.21.00%20PM-EmbyMovies.mov","pic":"http://share.dxz.plus/BlogContent/Screen%20Recording%202019-11-19%20at%2010.21.00%20PM-EmbyMovies.png"},"danmaku":{"id":"9E2E3368B56CDBB4","api":"http://dplayer.daoapp.io","token":"tokendemo"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script><p>南方公园刮削的算是比较好的了</p><div id="dplayer1" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer1"),"theme":"#FADFA3","video":{"url":"http://share.dxz.plus/BlogContent/Screen%20Recording%202019-11-23%20at%2011.05.58%20PM-SouthPark.mov","pic":"http://share.dxz.plus/BlogContent/Screen%20Shot%202019-11-23%20at%2011.06.47%20PM-SouthPark.png"},"danmaku":{"id":"9E2E3368B56CDBB4","api":"http://dplayer.daoapp.io","token":"tokendemo"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script><p>视频打不开看gif<br><img src="http://share.dxz.plus/BlogContent/Screen%20Recording%202019-11-23%20at%2011.05.58%20PM-SouthPark.gif" alt="SouthPark"><br>搞不定加群（via频道主） <a href="https://t.me/gdriveHost" target="_blank" rel="noopener">https://t.me/gdriveHost</a><br>我们的电影库永久免费开放，私我你邮箱即可加入，我和群里的小朋友一起维护，一起备份，一直更新<br><img src="http://dxz.plus/usr/uploads/2019/11/4104828687.png" alt="Screen Shot 2019-11-03 at 4.49.59 PM movie.png"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;免费的虽然是最贵的，但是性价比却无可争议的+∞&lt;/p&gt;
&lt;h2 id=&quot;废话一堆&quot;&gt;&lt;a href=&quot;#废话一堆&quot; class=&quot;headerlink&quot; title=&quot;废话一堆&quot;&gt;&lt;/a&gt;废话一堆&lt;/h2&gt;&lt;p&gt;写这个教程是主要是为了测试docker搭建typecho，由于docker映射文件夹简直太方便了，所有网站数据分分钟打包，备份，搬家。适合我这样的瞎折腾。&lt;br&gt;更主要的，我们手里有n多垃圾小鸡，除了探针，网盘目录外还有别的骚法么？&lt;br&gt;这篇文章带你骚。&lt;br&gt;基本上你的小鸡速度够快，尤其是晚上，比如北方联通用justhost，甲骨文之类的都可以非常爽快的试用这个方法。&lt;br&gt;由于是本地kodi解码，串流播放，服务器没啥压力，配置不需要多高，同时也没必要买emby专业版了，我的plex算是白买了，nas我还特意买的J3455服务端解码，看来也是浪费。&lt;br&gt;虽然读取的是gdrive电影，但是由于是vps搭建，host大法基本用不到了。并且这个emby个人服务应该不会触及红线，系统占用低，不用担心被各种ban(GFW&amp;amp;VPS providers)&lt;br&gt;5分钟也就是个标题，看看就好，熟练了也就10分钟以内就搞定。我一连气儿搭了3个服务，太爽了，不分享出来是不行的，憋着难受&lt;/p&gt;
    
    </summary>
    
    
    
  </entry>
  
</feed>
